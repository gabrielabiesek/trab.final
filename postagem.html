<!DOCTYPE html>
<!DOCTYPE html>
<html lang="pt-br">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="imagens/logoIcone.png" type="image/x-icon">
        <title>GT Entertainment</title>
    <style>
        body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f0f0f0;
        padding: 30px;
        }

        .upload-container {
        background: white;
        border-radius: 10px;
        padding: 20px;
        display: inline-block;
        box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        img {
        margin-top: 15px;
        max-width: 200px;
        border-radius: 10px;
        }
    </style>
    </head>
    <body>

    <div class="upload-container">
        <h2>Escolha a foto que deseja postar</h2>
        <form id="postForm">
            <input type="file" id="foto" accept="image/*" required>
            <br>
            <img id="preview" src="" alt="PrÃ©via da imagem">
            <br>
            <input type="text" id="caption" placeholder="Legenda (opcional)" style="width:90%; margin-top:10px; padding:5px;">
            <br>
            <button type="submit" style="font-size: 200%; margin-top:10px;">POSTAR</button>
        </form>
        <a href="perfil.html"></a>
    </div>

    <script>
        const fileInput = document.getElementById('foto');
        const preview = document.getElementById('preview');
        const form = document.getElementById('postForm');

        fileInput.addEventListener('change', () => {
            const arquivo = fileInput.files[0];
            if (arquivo) {
                const leitor = new FileReader();
                leitor.onload = function(e) {
                    preview.src = e.target.result;
                }
                leitor.readAsDataURL(arquivo);
            }
        });

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const arquivo = fileInput.files[0];
            if (!arquivo) {
                alert('Por favor, selecione uma imagem');
                return;
            }

            const leitor = new FileReader();
            leitor.onload = function(e) {
                const novoPost = {
                    image: e.target.result,
                    caption: document.getElementById('caption').value || '',
                    user: '@mavie',
                    avatar: 'imagens/eu.jpg',
                    createdAt: Date.now()
                };

                const posts = JSON.parse(localStorage.getItem('userPosts') || '[]');
                posts.push(novoPost);
                localStorage.setItem('userPosts', JSON.stringify(posts));

                window.location.href = 'pagPrincipal.html';
            };
            leitor.readAsDataURL(arquivo);
        });
    </script>
    </body>
</html>
</html>