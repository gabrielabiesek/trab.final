<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="Imagens/logoIcone.png" type="image/x-icon">
        <title>GT Entertainment</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
         <div class="cima">
            <header>
                <p>recentes ‚Üì</p>
                    <div class="userstory">
                        <a href="story1.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina1.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@jubs</p>
                    </div>
                    <div class="userstory">
                        <a href="story2.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina2.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@jucanei</p>
                    </div>
                    <div class="userstory">
                        <a href="story3.html">
                            <div class="story-wrapper">
                                <img src="imagens/menino1.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@vinicius</p>
                    </div>
                    <div class="userstory">
                        <a href="story4.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina3.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@sabrina</p>
                    </div>
                    <div class="userstory">
                        <a href="story5.html">
                            <div class="story-wrapper">
                                <img src="imagens/menino3.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@gustavo</p>
                    </div>
                    <div class="userstory">
                        <a href="story6.html">
                            <div class="story-wrapper">
                                <img src="imagens/WhatsApp Image 2025-10-08 at 19.52.16.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@marcelo</p>
                    </div>
                    <div class="userstory">
                        <a href="story7.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina4.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@jucanei</p>
                    </div>
                    <div class="userstory">
                        <a href="story8.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina5.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@ninamiano</p>
                    </div>
                    <div class="userstory">
                        <a href="story9.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina6.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@nicoli</p>
                    </div>
                    <div class="userstory">
                        <a href="story10.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina7.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@alessandra</p>
                    </div>
                    <div class="userstory">
                        <a href="story11.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina8.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@antonella</p>
                    </div>
                    <div class="userstory">
                        <a href="story12.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina9.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@sofiapas</p>
                    </div>
                    <div class="userstory">
                        <a href="story13.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina10.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@valentina</p>
                    </div>
                    <div class="userstory">
                        <a href="story14.html">
                            <div class="story-wrapper">
                                <img src="imagens/menina11.jpeg" alt="" class="story">
                            </div>
                        </a>
                        <p>@beatriz</p>
                    </div>
                    <div class="userstory">
                        <a href="story15.html">
                        <div class="story-wrapper">
                            <img src="imagens/menina12.jpeg" alt="" class="story">
                        </div>
                        </a>
                        <p>@isadora</p>
                    </div>
            </header>
        </div>

        <hr>

        <div class="lado">
                <aside>
                    <a href="postagem.html"><button type="submit"><img src="imagens/iconeld4.jpeg" alt="A imagem n√£o carregou"></button></a><br>
                    <a href="pesquisa.html"><button type="submit"><img src="imagens/lupa.png" alt="A imagem n√£o carregou"></button></a> <br>
                    <a href="camera.html"><button type="submit"><img src="imagens/iconeld3.jpeg" alt="A imagem n√£o carregou"></button></a> <br>
                    <a href="perfil.html"><button type="submit"><img src="imagens/iconeld2.jpeg" alt="A imagem n√£o carregou"></button></a>
                    <a href="mensagem.html"><button type="submit"><img src="imagens/mensagens.jpg" alt=""></button></a>
                </aside> 
            
            <div>
                <main>

                    <!-- POST 1 -->
                    <div class="post1">
                        <div class="usuario">
                            <img src="Imagens/rafa.jpg" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;"> 
                            <p style="margin-top: 10%; margin-left: 3%;"> @raphael_montes </p>
                        </div>

                        <img src="imagens/rafa2.jpg" alt="" style="margin-top: 5%; margin-left: 3.5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                        </div>

                        <p class="legenda">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">@rafael_montes</mark>
                            Hoje √© o <mark>#DiaMundialDoLivro</mark> üìö ‚ô•Ô∏è √â uma alegria contar hist√≥rias <br>
                            que emocionam e surpreendem leitores de todo o mundo! E que deixa, <br>
                            voc√™s sem dormir! rs üòÅ
                            <br><br>
                            Qual √© o seu livro favorito?
                        </p>

                        <!-- coment√°rios post1 -->
                        <div id="comentarios_post1" class="comentarios"></div>
                        <input style="margin-left: 2.5%;" type="text" id="input_post1" placeholder="Adicione um coment√°rio..." 
                               onkeydown="if(event.key==='Enter'){ adicionarComentario('input_post1','comentarios_post1'); }">
                        <button class="enviar" type="submit">enviar</button>
                    </div>

                    <!-- POST 2 -->
                    <div class="post2">
                        <div class="usuario">
                            <img src="imagens/eu.jpg" alt="" style="border-radius: 47%; margin-left: 3%; margin-top: 5%;"> 
                            <p style="margin-top: 10%; margin-left: 3%;">@gabybiiesek</p>
                        </div>

                        <img src="imagens/nos.jpg" alt="" style="margin-left: 8%; margin-top: 5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                        </div>

                        <p style="margin-left: 3.5%;">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">@gabybiiesek</mark>
                            ü©∑
                        </p>

                        <!-- coment√°rios post2 -->
                        <div id="comentarios_post2" class="comentarios"></div>
                        <input style="margin-left: 2.5%;" type="text" id="input_post2" placeholder="Adicione um coment√°rio..." 
                               onkeydown="if(event.key==='Enter'){ adicionarComentario('input_post2','comentarios_post2'); }">
                        <button type="submit">enviar</button>
                    </div>

                    <!-- POST 3 -->
                    <div class="post3">
                        <div class="usuario">
                            <img src="imagens/grl.jpg" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;">
                            <p style="margin-top: 10%; margin-left: 3%;">@grltruck</p>
                        </div>

                        <img src="imagens/grl2.jpg" alt="" style="margin-left: 10%; margin-top: 5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                        </div>

                        <p style="margin-left: 3.5%;">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">@grltruck</mark>
                            Caminh√£o rosa mais lindo do Brasil! ü©∑
                        </p>

                        <!-- coment√°rios post3 -->
                        <div id="comentarios_post3" class="comentarios"></div>
                        <input style="margin-left: 2.5%;" type="text" id="input_post3" placeholder="Adicione um coment√°rio..." 
                               onkeydown="if(event.key==='Enter'){ adicionarComentario('input_post3','comentarios_post3'); }">
                    </div>

                    <!-- POST 4 -->
                    <div class="post4">
                        <div class="usuario">
                            <img src="imagens/thalia.jpg" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;">
                            <p style="margin-top: 10%; margin-left: 3%;">@thailacasal</p>
                        </div>

                        <img src="imagens/thalia2.jpg" alt="" style="margin-left: 5%; margin-top: 5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                            <img src="imagens/icone4.png" alt="" style="margin-left: auto;">
                        </div>

                        <p style="margin-left: 3.5%;">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">@thailacasal</mark>
                            Interclasse 2k25
                        </p>

                        <!-- coment√°rios post4 -->
                        <div id="comentarios_post4" class="comentarios"></div>
                        <input style="margin-left: 2.5%;" type="text" id="input_post4" placeholder="Adicione um coment√°rio..." 
                               onkeydown="if(event.key==='Enter'){ adicionarComentario('input_post4','comentarios_post4'); }">
                    </div>

                    <!-- POST 5 -->
                    <div class="post5">
                        <div class="usuario">
                            <img src="imagens/eu.jpg" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;">
                            <p style="margin-top: 10%; margin-left: 3%;">@gabybiiesek</p>
                        </div>

                        <img src="imagens/praia.jpg" alt="" style="margin-left: 8%; margin-top: 5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                            <img src="imagens/icone4.png" alt="" style="margin-left: auto;">
                        </div>

                        <p style="margin-left: 3.5%;">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">@gabybiiesek</mark>
                            Missing this place sm!
                        </p>

                        <!-- coment√°rios post5 -->
                        <div id="comentarios_post5" class="comentarios"></div>
                        <input style=" margin-left: 2.5%" type="text" id="input_post5" placeholder="Adicione um coment√°rio..." 
                               onkeydown="if(event.key==='Enter'){ adicionarComentario('input_post5','comentarios_post5'); }">
                            
                    </div>

                </main>
            </div>
        </div>
    </body>

    <script>
        function toggleLike(button) {
            if (button.textContent === 'ü§ç') {
                button.textContent = '‚ù§Ô∏è';
                button.classList.add('liked');
            } else {
                button.textContent = 'ü§ç';
                button.classList.remove('liked');
            }
        }

        // Fun√ß√£o de coment√°rios igual ao seu primeiro c√≥digo
        function adicionarComentario(idInput, idDiv) {
            const input = document.getElementById(idInput);
            const divComentario = document.getElementById(idDiv);

            if (input.value.trim() !== "") {
                const item = document.createElement('p');
                item.textContent = "@gabybiiesek: " + input.value;
                divComentario.appendChild(item);
                input.value = '';
            }
        }

        // Carregar posts do localStorage e renderizar
        function loadUserPosts() {
            const posts = JSON.parse(localStorage.getItem('userPosts') || '[]');
            const main = document.querySelector('main');
            posts.forEach((p, idx) => {
                const container = document.createElement('div');
                container.className = 'post-generated';
                container.innerHTML = `
                    <div class="usuario">
                        <img src="${p.avatar}" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;">
                        <p style="margin-top: 10%; margin-left: 3%;">${p.user}</p>
                    </div>
                    <img src="${p.image}" alt="" style="margin-top: 5%; margin-left: 3.5%;">
                    <div class="post-actions">
                        <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                        <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                        <img src="imagens/icone3.png" alt="">
                    </div>
                    <p style="margin-left: 3.5%;">
                        <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">${p.user}</mark>
                        ${p.caption}
                    </p>
                    <div id="comentarios_user_${idx}" class="comentarios"></div>
                    <input style="margin-left: 2.5%;" type="text" id="input_user_${idx}" placeholder="Adicione um coment√°rio..." onkeydown="if(event.key==='Enter'){ adicionarComentario('input_user_${idx}','comentarios_user_${idx}'); }">
                    <button type="button" onclick="adicionarComentario('input_user_${idx}','comentarios_user_${idx}')">enviar</button>
                `;
                main.appendChild(container);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadUserPosts();
            
            const storyLinks = document.querySelectorAll('.userstory a');
            
            storyLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const storyWrapper = this.querySelector('.story-wrapper');
                    if (storyWrapper) {
                        storyWrapper.classList.add('viewed');
                    }
                    localStorage.setItem(this.getAttribute('href'), 'viewed');
                });
            });

            storyLinks.forEach(link => {
                if (localStorage.getItem(link.getAttribute('href')) === 'viewed') {
                    const storyWrapper = link.querySelector('.story-wrapper');
                    if (storyWrapper) {
                        storyWrapper.classList.add('viewed');
                    }
                }
            });
        });
        
        // Carregar posts do servidor (posts persistidos em posts.json pelo servidor)
        async function appendServerPosts() {
            try {
                const res = await fetch('/posts');
                if (!res.ok) return;
                const posts = await res.json();
                const main = document.querySelector('main');
                posts.forEach((p, idx) => {
                    const container = document.createElement('div');
                    container.className = 'post-generated';
                    container.innerHTML = `
                        <div class="usuario">
                            <img src="${p.avatar}" alt="" style="border-radius: 50%; margin-left: 3%; margin-top: 5%;"> 
                            <p style="margin-top: 10%; margin-left: 3%;">${p.user}</p>
                        </div>

                        <img src="${p.imageUrl}" alt="" style="margin-top: 5%; margin-left: 3.5%;">

                        <div class="post-actions">
                            <button class="like-button" onclick="toggleLike(this)">ü§ç</button>
                            <img src="imagens/icone2.png" alt="" style="margin-top: 1%;">
                            <img src="imagens/icone3.png" alt="">
                        </div>

                        <p style="margin-left: 3.5%;">
                            <mark style="color: rgb(51, 46, 46); background-color: rgb(236, 233, 233);">${p.user}</mark>
                            ${p.caption}
                        </p>

                        <div id="comentarios_server_${idx}" class="comentarios"></div>
                        <input style="margin-left: 2.5%;" type="text" id="input_server_${idx}" placeholder="Adicione um coment√°rio..." onkeydown="if(event.key==='Enter'){ adicionarComentario('input_server_${idx}','comentarios_server_${idx}'); }">
                        <button type="button" onclick="adicionarComentario('input_server_${idx}','comentarios_server_${idx}')">enviar</button>
                    `;
                    main.appendChild(container);
                });
            } catch (err) {
                console.error('Falha ao buscar posts:', err);
            }
        }

        document.addEventListener('DOMContentLoaded', appendServerPosts);
    </script>
</html>